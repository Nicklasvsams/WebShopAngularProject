<h1>Purchase administration</h1>

<div>
    <div>
        <label>User</label>
        <select [(ngModel)]="purchase.userId" type="number">
            <option disabled>Choose user</option>
            <option *ngFor="let user of users" [ngValue]='user.id'>
                {{ user.username }}
            </option>
        </select>
    </div>
    <div>
        <label>Product</label>
        <select [(ngModel)]="purchase.productId" type="number">
            <option disabled>Choose product</option>
            <option *ngFor="let product of products" [ngValue]='product.id'>
                {{ product.name }}
            </option>
        </select>
    </div>
    <div>
        <label>Purchase date</label>
        <input [(ngModel)]="purchase.purchaseDate" type="date">
    </div>
    <button (click)="save()">Save</button>
    <button (click)="cancel()">Cancel</button>
</div>
<br>
<ul *ngIf="purchases.length > 0">
    <div class="infoCard" *ngFor="let purchase of purchases">
        <button (click)="edit(purchase)">Edit</button>
        <button (click)="delete(purchase)">Delete</button>
        Purchase ID: {{purchase.id}} - Purchase Date: {{purchase.purchaseDate | date}} <br>
        <ul *ngIf="purchase.user != null">
            <li>
                <h4>User:</h4>
            </li>
            <li>Id: {{ purchase.user.id }}</li>
            <li>Username: {{ purchase.user.username }}</li>
            <li>Password: {{ purchase.user.password }}</li>
            <li>Email: {{ purchase.user.email }}</li>
            <li>User Type: {{ purchase.user.userType }}</li>
        </ul>
        <ul *ngIf="purchase.product != null">
            <li>
                <h4>Product:</h4>
            </li>
            <li>ID: {{ purchase.product.id }}</li>
            <li>Name: {{ purchase.product.name }}</li>
            <li>Price: {{ purchase.product.price }}</li>
            <li>Description: {{ purchase.product.description }}</li>
            <li>Stock: {{ purchase.product.stock }}</li>
        </ul>
    </div>
</ul>